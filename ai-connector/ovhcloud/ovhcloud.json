{
  "meta": {
    "schemaVersion": "1.0.0"
  },
  "data": {
    "type": "blueprint",
    "attributes": {
      "getDocuments": [
        {
          "action": "goToUrl",
          "url": "https://www.ovh.com/manager/#/billing/history?pageSize=300"
        },
        {
          "action": "waitForNetworkIdle"
        },
        {
          "action": "forEach",
          "id": "invoice-links-loop",
          "on": {
            "querySelector": ".oui-dropdown-menu__item a[href]"
          },
          "steps": [
            {
              "action": "getPdf",
              "includes": "bill.pdf",
              "outputVariable": "new_pdfs"
            },
            {
              "action": "mergeVariables",
              "inputVariable": "new_pdfs",
              "outputVariable": "all_pdfs"
            }
          ]
        },
        {
          "action": "downloadPdfsFromUrls",
          "inputVariable": "all_pdfs"
        }
      ]
    }
  }
}